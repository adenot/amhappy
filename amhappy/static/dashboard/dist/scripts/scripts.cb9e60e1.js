"use strict";angular.module("dashboardApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{happinstances:["Happinstance",function(a){return a.query().$promise}]}}).when("/happinstance_detail/:application/:name",{templateUrl:"views/happinstancedetail.html",controller:"HappinstancedetailCtrl"}).when("/create_happinstance",{templateUrl:"views/createhappinstance.html",controller:"CreatehappinstanceCtrl"}).when("/manage_vhosts",{templateUrl:"views/managevhosts.html",controller:"ManagevhostsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("dashboardApp").controller("MainCtrl",["$scope","happinstances",function(a,b){a.happinstances=b.happinstances}]),angular.module("dashboardApp").factory("Happinstance",["$resource","service_root","happinstance_url",function(a,b,c){var d=b+c+"/:application/:name";return a(d,{},{query:{method:"GET",isArray:!1},changeStatus:{method:"PUT"}})}]),angular.module("dashboardApp").factory("Application",["$resource","service_root","application_url",function(a,b,c){var d=b+c+"/:application";return a(d,{},{query:{method:"GET",isArray:!0}})}]),angular.module("dashboardApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("dashboardApp").controller("HappinstancedetailCtrl",["$scope","$routeParams","$location","Happinstance","PortInfo",function(a,b,c,d,e){var f={application:b.application,name:b.name},g=function(){a.detail=d.get(f),a.port_info=e.get(f)};a.name=b.name,a.application=b.application,a.toJson=angular.toJson,a.toggleStatus=function(a){"on"==a?d.changeStatus(f,{action:"off"},g):d.changeStatus(f,{action:"on"},g)},a.detail=d.get(f),a.port_info=e.get(f),a["delete"]=function(){d["delete"](f,function(){c.url("/")})}}]),angular.module("dashboardApp").controller("CreatehappinstanceCtrl",["$scope","$location","Application","Happinstance","ConfigOptions","Vhosts",function(a,b,c,d,e,f){c.query(function(b){a.applications=b}),a.environments={},a.selectedApplication="",a.name="",a.toJson=angular.toJson,a.isDefined=angular.isDefined,a.config_options=e.get(),a.$watch(function(){return a.selectedApplication},function(b){""!=b&&(a.config=c.get({application:b}),a.vhosts_available=f.get({application:b}))}),a.submit=function(){angular.forEach(a.environments,function(b,c){angular.forEach(b,function(b,d){a.config[c].environment[d]=b})}),d.save({application:a.selectedApplication,name:a.name},a.config,function(){b.url("/")})}}]),angular.module("dashboardApp").factory("ConfigOptions",["$resource","service_root","config_url",function(a,b,c){var d=b+c;return a(d)}]),angular.module("dashboardApp").service("Vhosts",["$resource","service_root","vhosts_url",function(a,b,c){var d=b+c+"/:application";return a(d,{},{query:{method:"GET"}})}]),angular.module("dashboardApp").controller("ManagevhostsCtrl",["$scope","Application","Vhosts",function(a,b,c){b.query(function(b){a.applications=b}),a.name="",a.selectedApplication="",a.$watch(function(){return a.selectedApplication},function(b){""!=b&&(a.vhosts=c.get({application:b}))}),a.submit=function(){c.save({application:a.selectedApplication},{name:a.name})}}]),angular.module("dashboardApp").factory("PortInfo",["$resource","service_root","portinfo_url",function(a,b,c){var d=b+c+"/:application/:name";return a(d)}]);